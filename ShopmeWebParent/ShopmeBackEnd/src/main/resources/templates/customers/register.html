<!DOCTYPE html>
<html class="no-js" lang="zxx"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      xmlns:th="http://www.thymeleaf.org"
>
<head th:replace="fragments.html :: page_head('Register')">
</head>

<body>

<div th:replace="fragments.html :: header"></div>



<div class="breadcrumbs">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 col-md-6 col-12">
                <div class="breadcrumbs-content">
                    <h1 class="page-title">Registration</h1>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-12">
                <ul class="breadcrumb-nav">
                    <li><a th:href="@{/}"><i class="lni lni-home"></i> Home</a></li>
                    <li>Registration</li>
                </ul>
            </div>
        </div>
    </div>
</div>


<div class="account-login section">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 offset-lg-3 col-md-10 offset-md-1 col-12">
                <div class="register-form">
                    <div class="title">
                        <h3>No Account? Register</h3>
                        <p>Registration takes less than a minute but gives you full control over your orders.</p>
                    </div>
                    <form class="row" method="post" th:action="@{/create_customer}" onsubmit="return checkEmailUnique(this)" th:object="${customer}">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-fn">First Name</label>
                                <input class="form-control" th:field="*{firstName}" minlength="2" maxlength="45" id="reg-fn" required type="text">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-ln">Last Name</label>
                                <input class="form-control" th:field="*{lastName}" minlength="2" maxlength="45" id="reg-ln" required type="text">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-email">E-mail Address</label>
                                <input class="form-control" th:field="*{email}" minlength="8" maxlength="45" id="reg-email" required type="email">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-phone">Phone Number</label>
                                <input class="form-control" th:field="*{phoneNumber}" minlength="8" maxlength="15" id="reg-phone" required type="text">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-pass">Password</label>
                                <input class="form-control" id="reg-pass" oninput="checkPasswordMatch(document.getElementById('reg-pass-confirm'))"
                                       th:field="*{password}" minlength="8" maxlength="15" required type="password">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-pass-confirm">Confirm Password</label>
                                <input class="form-control" oninput="checkPasswordMatch(this)"
                                       id="reg-pass-confirm" minlength="8" maxlength="15" required type="password">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-add1">Address 1</label>
                                <input class="form-control" id="reg-add1" th:field="*{addressLine1}" minlength="3" maxlength="64" required type="text">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-add2">Address 2</label>
                                <input class="form-control" id="reg-add2" th:field="*{addressLine2}" minlength="3" maxlength="64" type="text">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-city">City</label>
                                <input class="form-control" id="reg-city" th:field="*{city}" minlength="2" maxlength="45" required type="text">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-country">Country</label>
                                <select class="form-control" id="reg-country" th:field="*{country}" required >
                                    <th:block th:each="country : ${listCountries}">
                                        <option th:value="${country.id}">[[${country.name}]]</option>
                                    </th:block>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-state">State/Province</label>
                                <input class="form-control" id="reg-state" th:field="*{state}" minlength="3" maxlength="45" required list="listStates">
                                <datalist id="listStates"></datalist>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-code">Postal Code</label>
                                <input class="form-control" id="reg-code" th:field="*{postalCode}" minlength="2" maxlength="10" required type="text">
                            </div>
                        </div>

                        <div class="button">
                            <button class="btn" type="submit">Register</button>
                        </div>
                        <p class="outer-link">Already have an account? <a th:href="@{/login}">Login Now</a>
                        </p>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="fragments/modal :: modal"></div>


<footer class="footer">

    <div class="footer-top">
        <div class="container">
            <div class="inner-content">
                <div class="row">
                    <div class="col-lg-3 col-md-4 col-12">
                        <div class="footer-logo">
                            <a href="index.html">
                                <img alt="#" src="assets/images/logo/white-logo.svg">
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-8 col-12">
                        <div class="footer-newsletter">
                            <h4 class="title">
                                Subscribe to our Newsletter
                                <span>Get all the latest information, Sales and Offers.</span>
                            </h4>
                            <div class="newsletter-form-head">
                                <form action="register.html#" class="newsletter-form" method="get" target="_blank">
                                    <input name="EMAIL" placeholder="Email address here..." type="email">
                                    <div class="button">
                                        <button class="btn">Subscribe<span class="dir-part"></span></button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="footer-middle">
        <div class="container">
            <div class="bottom-inner">
                <div class="row">
                    <div class="col-lg-3 col-md-6 col-12">

                        <div class="single-footer f-contact">
                            <h3>Get In Touch With Us</h3>
                            <p class="phone">Phone: +1 (900) 33 169 7720</p>
                            <ul>
                                <li><span>Monday-Friday: </span> 9.00 am - 8.00 pm</li>
                                <li><span>Saturday: </span> 10.00 am - 6.00 pm</li>
                            </ul>
                            <p class="mail">
                                <a href="https://demo.graygrids.com/cdn-cgi/l/email-protection#5b282e2b2b34292f1b2833342b3c29323f2875383436"><span
                                        class="__cf_email__"
                                        data-cfemail="ed9e989d9d829f99ad9e85829d8a9f84899ec38e8280">[email&#160;protected]</span></a>
                            </p>
                        </div>

                    </div>
                    <div class="col-lg-3 col-md-6 col-12">

                        <div class="single-footer our-app">
                            <h3>Our Mobile App</h3>
                            <ul class="app-btn">
                                <li>
                                    <a href="javascript:void(0)">
                                        <i class="lni lni-apple"></i>
                                        <span class="small-title">Download on the</span>
                                        <span class="big-title">App Store</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)">
                                        <i class="lni lni-play-store"></i>
                                        <span class="small-title">Download on the</span>
                                        <span class="big-title">Google Play</span>
                                    </a>
                                </li>
                            </ul>
                        </div>

                    </div>
                    <div class="col-lg-3 col-md-6 col-12">

                        <div class="single-footer f-link">
                            <h3>Information</h3>
                            <ul>
                                <li><a href="javascript:void(0)">About Us</a></li>
                                <li><a href="javascript:void(0)">Contact Us</a></li>
                                <li><a href="javascript:void(0)">Downloads</a></li>
                                <li><a href="javascript:void(0)">Sitemap</a></li>
                                <li><a href="javascript:void(0)">FAQs Page</a></li>
                            </ul>
                        </div>

                    </div>
                    <div class="col-lg-3 col-md-6 col-12">

                        <div class="single-footer f-link">
                            <h3>Shop Departments</h3>
                            <ul>
                                <li><a href="javascript:void(0)">Computers & Accessories</a></li>
                                <li><a href="javascript:void(0)">Smartphones & Tablets</a></li>
                                <li><a href="javascript:void(0)">TV, Video & Audio</a></li>
                                <li><a href="javascript:void(0)">Cameras, Photo & Video</a></li>
                                <li><a href="javascript:void(0)">Headphones</a></li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="footer-bottom">
        <div class="container">
            <div class="inner-content">
                <div class="row align-items-center">
                    <div class="col-lg-4 col-12">
                        <div class="payment-gateway">
                            <span>We Accept:</span>
                            <img alt="#" src="assets/images/footer/credit-cards-footer.png">
                        </div>
                    </div>
                    <div class="col-lg-4 col-12">
                        <div class="copyright">
                            <p>Designed and Developed by<a href="https://graygrids.com/" rel="nofollow" target="_blank">GrayGrids</a>
                            </p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-12">
                        <ul class="socila">
                            <li>
                                <span>Follow Us On:</span>
                            </li>
                            <li><a href="javascript:void(0)"><i class="lni lni-facebook-filled"></i></a></li>
                            <li><a href="javascript:void(0)"><i class="lni lni-twitter-original"></i></a></li>
                            <li><a href="javascript:void(0)"><i class="lni lni-instagram"></i></a></li>
                            <li><a href="javascript:void(0)"><i class="lni lni-google"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

</footer>


<a class="scroll-top" href="register.html#">
    <i class="lni lni-chevron-up"></i>
</a>

<script th:src="@{assets/js/bootstrap.min.js}"></script>
<script th:src="@{assets/js/tiny-slider.js}"></script>
<script th:src="@{assets/js/glightbox.min.js}"></script>
<script th:src="@{assets/js/main.js}"></script>
<script th:src="@{/assets/js/jquery/jquery.js}"></script>
<script th:src="@{/assets/js/common_form.js}"></script>
<script th:src="@{/assets/js/common_customer-form.js}"></script>



<script type="text/javascript">
    contextPath = "[[@{/}]]";


    function checkEmailUnique(form){
        url = contextPath + "customers/check_unique_email";
        userEmail = $("#reg-email").val();
        csrfValue = $("input[name='_csrf']").val();
        params = {email: userEmail, _csrf: csrfValue};

        console.log(userEmail+csrfValue);

        $.post(url, params, function(response) {
            if(response == "OK"){
                form.submit();
            }else if(response =="Duplicated"){
                showWarningModal("There is another user having the email "+userEmail);
            }else{
                showErrorModal(" Unknown response from server");
            }

        }).fail(function(){
            showErrorModal("Could not connect to server");
        });

        return false;
    }
</script>
</body>
</html>